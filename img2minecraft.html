<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YUI</title>
    <script src="blockdata/blocks.js"></script>
    <script src="js/closestBlock.js"></script>
    <script src="js/mapArt.js"></script>
    <link rel="stylesheet" href="style/app.css">
    <style>

        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        table {
            border-spacing: 0;
            border-collapse: collapse;
        }

        th, td, img {
            padding: 0;
            width: 7px;
            height: 7px;
        }

        img {
            display: block;
        }

    </style>
</head>
<body>

<div>
    <h1>Image 2 minecraft</h1>
    <label for="imageUploadInput">File</label>
    <input id="imageUploadInput" onchange="onImageChange()" name="file" type="file" accept="image/*">
</div>

<div id="outputContainer">

</div>

<script>

    const imageUploadInput = document.getElementById('imageUploadInput')
    const outputContainerElement = document.querySelector('#outputContainer')

    const onImageChange = async () => {
        const imageFile = imageUploadInput.files[0]

        outputContainerElement.innerHTML = ''

        const resultCanvas = await imageToMinecraft(imageFile)
        resultCanvas.id = 'convertedImageCanvas'

        const downloadButton = document.createElement('button')
        downloadButton.onclick = () => {
            window.location.href = resultCanvas
                .toDataURL("image/png")
                .replace("image/png", "image/octet-stream");
        }

        outputContainerElement.appendChild(downloadButton)
        outputContainerElement.appendChild(resultCanvas)
    }

</script>
</body>
</html>