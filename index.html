<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YUI</title>
    <script src="blockdata/blocks.js"></script>
    <script src="js/closestBlock.js"></script>
    <script src="js/gradientCalculator.js"></script>
    <link rel="stylesheet" href="style/app.css">
</head>
<body>
    <form onsubmit="event.preventDefault(); onSearchFormSubmit()">
        <label for="startColorPicker">Start of the gradient:</label>
        <input type="color" id="startColorPicker"><br>
        <label for="endColorPicker">End of the gradient:</label>
        <input type="color" id="endColorPicker"><br>
        <input type="submit" value="Search">
    </form>

    <div id="outputContainer">

    </div>

    <script>

        const startColorPickerElement = document.getElementById('startColorPicker')
        const endColorPickerElement = document.getElementById('endColorPicker')
        const outputContainer = document.getElementById('outputContainer')

        const hexToRgb = hex => [
            parseInt(hex.substring(1,3), 16),
            parseInt(hex.substring(3,5), 16),
            parseInt(hex.substring(5,7), 16)
        ]

        const onSearchFormSubmit = () => {
            const gradientStartColor = hexToRgb(startColorPickerElement.value)
            const gradientEndColor = hexToRgb(endColorPickerElement.value)
            const colorSteps = calculateGradientSteps(gradientStartColor, gradientEndColor, 5)

            outputContainer.innerHTML = ''

            for (const step of colorSteps) {
                const stepBlock = mostSimilarBlock(step)
                const stepBlockId = stepBlock['id']

                const blockImage = document.createElement('img')
                blockImage.setAttribute('src', `/blockdata/images/${stepBlockId}`)
                blockImage.setAttribute('alt', `Block with id ${stepBlockId}`)
                outputContainer.appendChild(blockImage)
            }

        }

    </script>
</body>
</html>